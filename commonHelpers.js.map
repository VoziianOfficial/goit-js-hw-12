{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = \"11359528-a3a233b98fbb1427184d51103\";\nconst URL = \"https://pixabay.com/api/\";\n\nasync function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const searchParams = new URLSearchParams({\n      key: apiKey,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: page,\n      per_page: perPage,\n    });\n\n    const response = await axios.get(`${URL}?${searchParams}`);\n    return response.data;\n  } catch (error) {\n    console.error('Помилка при отриманні даних', error);\n    throw error;\n  }\n}\n\nexport { fetchImages };","function renderGallery(images) {\n    const gallery = document.querySelector(\".gallery\");\n    const markup = images.map(image => {\n        return `<div class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\"></img>\n            </a>\n        </div>`;\n    }).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n}\n\nfunction clearGallery() {\n    const gallery = document.querySelector(\".gallery\");\n    gallery.innerHTML = \"\";\n}\n\nfunction showLoadMoreButton() {\n    const loadMoreButton = document.querySelector(\".load-more\");\n    loadMoreButton.hidden = false;\n}\n\nfunction hideLoadMoreButton() {\n    const loadMoreButton = document.querySelector(\".load-more\");\n    loadMoreButton.hidden = true;\n}\n\nexport { renderGallery, clearGallery, showLoadMoreButton, hideLoadMoreButton };","import { fetchImages } from \"./js/pixabay-api\";\nimport { renderGallery, clearGallery } from \"./js/render-functions\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet currentPage = 1;\nconst perPage = 25;\nconst maxPages = 10;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst searchInput = document.querySelector('[data-search]');\nconst searchButton = document.querySelector('[data-search-button]');\nconst loadMoreButton = document.querySelector('.load-more');\n\nsearchButton.addEventListener('click', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  currentQuery = searchInput.value.trim();\n  if (!currentQuery) return;\n\n  currentPage = 1;\n  clearGallery();\n  hideLoadMoreButton();\n\n  const data = await fetchImages(currentQuery, currentPage, perPage);\n  totalHits = data.totalHits;\n\n  if (data.hits.length === 0) {\n    alert('No images found. Please try again.');\n    return;\n  }\n\n  renderGallery(data.hits);\n  new SimpleLightbox('.gallery a').refresh();\n\n  if (data.hits.length === perPage && currentPage < maxPages) {\n    showLoadMoreButton();\n  } else if (currentPage * perPage >= totalHits) {\n    hideLoadMoreButton();\n    alert(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n\nasync function onLoadMore() {\n  if (currentPage >= maxPages) {\n    hideLoadMoreButton();\n    alert(\"You've reached the maximum number of pages.\");\n    return;\n  }\n\n  currentPage += 1;\n\n  const data = await fetchImages(currentQuery, currentPage, perPage);\n  renderGallery(data.hits);\n  new SimpleLightbox('.gallery a').refresh();\n\n  if (currentPage * perPage >= totalHits) {\n    hideLoadMoreButton();\n    alert(\"We're sorry, but you've reached the end of search results.\");\n  } else if (data.hits.length < perPage) {\n    hideLoadMoreButton();\n    alert(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n\nfunction showLoadMoreButton() {\n  loadMoreButton.classList.remove('hidden');\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreButton.classList.add('hidden');\n}"],"names":["apiKey","URL","fetchImages","query","page","perPage","searchParams","axios","error","renderGallery","images","gallery","markup","image","clearGallery","currentPage","maxPages","currentQuery","totalHits","searchInput","searchButton","loadMoreButton","onSearch","onLoadMore","event","hideLoadMoreButton","data","SimpleLightbox","showLoadMoreButton"],"mappings":"6vBAEA,MAAMA,EAAS,qCACTC,EAAM,2BAEZ,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACxD,GAAI,CACF,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CAChB,CAAK,EAGD,OADiB,MAAME,EAAM,IAAI,GAAGN,CAAG,IAAIK,CAAY,EAAE,GACzC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,8BAA+BA,CAAK,EAC5CA,CACP,CACH,CCvBA,SAASC,EAAcC,EAAQ,CAC3B,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAIG,GACf;AAAA,uBACQA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,eAG7D,EAAE,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAClD,CAEA,SAASE,GAAe,CACpB,MAAMH,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACxB,CCVA,IAAII,EAAc,EAClB,MAAMV,EAAU,GACVW,EAAW,GACjB,IAAIC,EAAe,GACfC,EAAY,EAEhB,MAAMC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAe,SAAS,cAAc,sBAAsB,EAC5DC,EAAiB,SAAS,cAAc,YAAY,EAE1DD,EAAa,iBAAiB,QAASE,CAAQ,EAC/CD,EAAe,iBAAiB,QAASE,CAAU,EAEnD,eAAeD,EAASE,EAAO,CAI7B,GAHAA,EAAM,eAAc,EAEpBP,EAAeE,EAAY,MAAM,OAC7B,CAACF,EAAc,OAEnBF,EAAc,EACdD,IACAW,IAEA,MAAMC,EAAO,MAAMxB,EAAYe,EAAcF,EAAaV,CAAO,EAGjE,GAFAa,EAAYQ,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CAC1B,MAAM,oCAAoC,EAC1C,MACD,CAEDjB,EAAciB,EAAK,IAAI,EACvB,IAAIC,EAAe,YAAY,EAAE,UAE7BD,EAAK,KAAK,SAAWrB,GAAWU,EAAcC,EAChDY,IACSb,EAAcV,GAAWa,IAClCO,IACA,MAAM,4DAA4D,EAEtE,CAEA,eAAeF,GAAa,CAC1B,GAAIR,GAAeC,EAAU,CAC3BS,IACA,MAAM,6CAA6C,EACnD,MACD,CAEDV,GAAe,EAEf,MAAMW,EAAO,MAAMxB,EAAYe,EAAcF,EAAaV,CAAO,EACjEI,EAAciB,EAAK,IAAI,EACvB,IAAIC,EAAe,YAAY,EAAE,WAE7BZ,EAAcV,GAAWa,GAGlBQ,EAAK,KAAK,OAASrB,KAC5BoB,IACA,MAAM,4DAA4D,EAEtE,CAEA,SAASG,GAAqB,CAC5BP,EAAe,UAAU,OAAO,QAAQ,CAC1C,CAEA,SAASI,GAAqB,CAC5BJ,EAAe,UAAU,IAAI,QAAQ,CACvC"}