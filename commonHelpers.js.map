{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '43901454-2f0f1ad212df2deb6dd93021b';\n\n\nlet currentPage = 1;\nlet perPage = 15;\n\nconst pixApi = async data => {\n  try {\n    const searchParams = new URLSearchParams({\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: perPage,\n    });\n\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${apiKey}&q=${data}&${searchParams}`\n    );\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images', error);\n    throw error;\n  }\n};\n\nfunction setCurrentPage(page) {\n  currentPage = page;\n}\n\nfunction getCurrentPage() {\n  return currentPage;\n}\n\nexport { pixApi, perPage, setCurrentPage, getCurrentPage };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.card-link', {\n  inlineStyles: false,\n  captionsData: 'alt',\n  captionDelay: 250,\n  disableScroll: true,\n});\n\nconst renderImages = (resultData, list) => {\n  const markup = resultData\n    .map(\n      ({\n        largeImageURL,\n        likes,\n        comments,\n        views,\n        downloads,\n        tags,\n        webformatURL,\n      }) => {\n        return `<li class=\"card\">\n                <a class=\"card-link\" href=\"${largeImageURL}\">\n                    <img  class=\"card-image\" src=\"${webformatURL}\" alt=\"${tags}\" /> \n                </a>\n                <div class=\"main-content\">\n                    <ul class=\"card-list\">\n                        <li class=\"card-list-li\">\n                            <h3>\n                                likes\n                            </h3>\n                            <p>${likes}</p>\n                        </li>\n                        <li class=\"card-list-li\">\n                            <h3>\n                                views\n                            </h3>\n                            <p>${views}</p>\n                        </li>\n                        <li class=\"card-list-li\">\n                            <h3>\n                                comments\n                            </h3>\n                            <p>${comments}</p>\n                        </li>\n                        <li class=\"card-list-li\">\n                            <h3>\n                                downloads\n                            </h3>\n                            <p>${downloads}</p>\n                        </li>\n                    </ul>\n                </div>\n            </li>`;\n      }\n    )\n    .join('');\n\n  list.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n};\n\nexport default renderImages;","import {\n  pixApi,\n  perPage,\n  setCurrentPage,\n  getCurrentPage,\n} from './js/pixabay-api.js';\nimport renderImages from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('input[data-search]');\nconst loader = document.querySelector('.loader-div');\nconst list = document.querySelector('.list');\nconst moreBtn = document.querySelector('.show-more');\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  loader.style.display = 'flex';\n  localStorage.removeItem('search');\n  const search = input.value.trim();\n  list.innerHTML = '';\n\n  setCurrentPage(1);\n  moreBtn.style.visibility = 'hidden';\n\n  try {\n    const data = await pixApi(search);\n    localStorage.setItem('search', search);\n    const result = data.hits;\n    const totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (result.length !== 0 && search !== '') {\n      renderImages(result, list);\n\n      totalPages > getCurrentPage()\n        ? (moreBtn.style.visibility = 'visible')\n        : (moreBtn.style.visibility = 'hidden');\n    } else {\n      iziToast.show({\n        title: '❌',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: 'white',\n        backgroundColor: '#E25757',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error('Error fetching images', error);\n    moreBtn.style.visibility = 'hidden';\n    iziToast.show({\n      title: '❌',\n      message: 'Sorry, check your internet connection!',\n      messageColor: 'white',\n      backgroundColor: '#E25757',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  } finally {\n    loader.style.display = 'none';\n    e.target.reset();\n  }\n});\n\n\nmoreBtn.addEventListener('click', async () => {\n  loader.style.display = 'flex';\n  const searchRemember = localStorage.getItem('search');\n\n  setCurrentPage(getCurrentPage() + 1);\n\n  try {\n    const data = await pixApi(searchRemember);\n    const result = data.hits;\n    const card = document.querySelector('.card');\n    const totalPages = Math.ceil(data.totalHits / perPage);\n\n    renderImages(result, list);\n\n    if (totalPages > getCurrentPage()) {\n      moreBtn.style.visibility = 'visible';\n    } else {\n      iziToast.show({\n        title: '❌',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: 'white',\n        backgroundColor: '#E25757',\n        position: 'topRight',\n        timeout: 5000,\n      });\n      moreBtn.style.visibility = 'hidden';\n    }\n\n    const cardHeight = Math.floor(card.getBoundingClientRect().height);\n    scrollBy(0, cardHeight * 2);\n  } catch (error) {\n    console.error('Error fetching images', error);\n\n    iziToast.show({\n      title: '❌',\n      message: 'Sorry, check your internet connection!',\n      messageColor: 'white',\n      backgroundColor: '#E25757',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});"],"names":["apiKey","currentPage","perPage","pixApi","data","searchParams","axios","error","setCurrentPage","page","getCurrentPage","lightbox","SimpleLightbox","renderImages","resultData","list","markup","largeImageURL","likes","comments","views","downloads","tags","webformatURL","form","input","loader","moreBtn","e","search","result","totalPages","iziToast","searchRemember","card","cardHeight"],"mappings":"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"}