{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = \"11359528-a3a233b98fbb1427184d51103\";\nconst URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: apiKey,\n                q: query,\n                page: page,\n                per_page: perPage,\n                image_type: 'photo',\n                orientation: 'horizontal',\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}","export function renderImages(images) {\n    const list = document.querySelector('.articles');\n    const markup = images\n        .map(\n            img => `\n            <li>\n                <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n                <a href=\"${img.largeImageURL}\" target=\"_blank\">View</a>\n            </li>`\n        )\n        .join('');\n    list.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showLoadMoreButton() {\n    const button = document.querySelector('.button');\n    button.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n    const button = document.querySelector('.button');\n    button.classList.add('is-hidden');\n}\n\nexport function showEndOfCollectionMessage() {\n    iziToast.info({\n        title: 'No more results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n    });\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showLoadMoreButton, hideLoadMoreButton, showEndOfCollectionMessage } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const form = document.querySelector('.form-inline');\n    const loadMoreButton = document.querySelector('[data-action=\"load-more\"]');\n    const loaderDiv = document.querySelector('.loader-div');\n    const articlesList = document.querySelector('.articles');\n\n    form.addEventListener('submit', async (e) => {\n        e.preventDefault();\n        currentQuery = e.target.query.value.trim();\n        if (!currentQuery) return;\n\n        currentPage = 1;\n        articlesList.innerHTML = ''; // Clear previous results\n        loaderDiv.style.display = 'none'; // Hide loader initially\n\n        try {\n            const data = await fetchImages(currentQuery, currentPage);\n            if (data.totalHits > 0) {\n                renderImages(data.hits);\n                currentPage++;\n                showLoadMoreButton();\n                if (data.totalHits <= 15) {\n                    hideLoadMoreButton();\n                }\n            } else {\n                hideLoadMoreButton();\n            }\n        } catch (error) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Something went wrong while fetching images.',\n                position: 'topRight',\n            });\n        }\n    });\n\n    loadMoreButton.addEventListener('click', async () => {\n        loadMoreButton.disabled = true;\n        loaderDiv.style.display = 'flex'; // Show loader when fetching more images\n\n        try {\n            const data = await fetchImages(currentQuery, currentPage);\n            if (data.hits.length > 0) {\n                renderImages(data.hits);\n                currentPage++;\n                if (data.totalHits <= currentPage * 15) {\n                    hideLoadMoreButton();\n                    showEndOfCollectionMessage();\n                }\n            } else {\n                hideLoadMoreButton();\n            }\n        } catch (error) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Something went wrong while fetching images.',\n                position: 'topRight',\n            });\n        } finally {\n            loaderDiv.style.display = 'none'; // Hide loader when done\n            loadMoreButton.disabled = false;\n            smoothScroll();\n        }\n    });\n\n    function smoothScroll() {\n        const cardHeight = document.querySelector('.articles li').getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n});\n\n\n"],"names":["apiKey","fetchImages","query","page","perPage","axios","error","renderImages","images","list","markup","img","showLoadMoreButton","hideLoadMoreButton","showEndOfCollectionMessage","currentPage","currentQuery","form","loadMoreButton","loaderDiv","articlesList","data","iziToast","smoothScroll","cardHeight"],"mappings":"6vBAEA,MAAMA,EAAS,qCAGR,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC7D,GAAI,CAWA,OAViB,MAAMC,EAAM,IAAI,SAAU,CACvC,OAAQ,CACJ,IAAKL,EACL,EAAGE,EACH,KAAMC,EACN,SAAUC,EACV,WAAY,QACZ,YAAa,YAChB,CACb,CAAS,GACe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCtBO,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAAO,SAAS,cAAc,WAAW,EACzCC,EAASF,EACV,IACGG,GAAO;AAAA;AAAA,4BAESA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA,2BACnCA,EAAI,aAAa;AAAA,kBAEnC,EACA,KAAK,EAAE,EACZF,EAAK,mBAAmB,YAAaC,CAAM,CAC/C,CAEO,SAASE,GAAqB,CAClB,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,WAAW,CACvC,CAEO,SAASC,GAAqB,CAClB,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,WAAW,CACpC,CAEO,SAASC,GAA6B,CACzC,SAAS,KAAK,CACV,MAAO,kBACP,QAAS,6DACT,SAAU,UAClB,CAAK,CACL,CCzBA,IAAIC,EAAc,EACdC,EAAe,GAEnB,SAAS,iBAAiB,mBAAoB,IAAM,CAChD,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAiB,SAAS,cAAc,2BAA2B,EACnEC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAe,SAAS,cAAc,WAAW,EAEvDH,EAAK,iBAAiB,SAAU,MAAO,GAAM,CAGzC,GAFA,EAAE,eAAc,EAChBD,EAAe,EAAE,OAAO,MAAM,MAAM,KAAI,EACpC,EAACA,EAEL,CAAAD,EAAc,EACdK,EAAa,UAAY,GACzBD,EAAU,MAAM,QAAU,OAE1B,GAAI,CACA,MAAME,EAAO,MAAMpB,EAAYe,EAAcD,CAAW,EACpDM,EAAK,UAAY,GACjBd,EAAac,EAAK,IAAI,EACtBN,IACAH,IACIS,EAAK,WAAa,IAClBR,KAGJA,GAEP,MAAe,CACZS,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8CACT,SAAU,UAC1B,CAAa,CACJ,EACT,CAAK,EAEDJ,EAAe,iBAAiB,QAAS,SAAY,CACjDA,EAAe,SAAW,GAC1BC,EAAU,MAAM,QAAU,OAE1B,GAAI,CACA,MAAME,EAAO,MAAMpB,EAAYe,EAAcD,CAAW,EACpDM,EAAK,KAAK,OAAS,GACnBd,EAAac,EAAK,IAAI,EACtBN,IACIM,EAAK,WAAaN,EAAc,KAChCF,IACAC,MAGJD,GAEP,MAAe,CACZS,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8CACT,SAAU,UAC1B,CAAa,CACb,QAAkB,CACNH,EAAU,MAAM,QAAU,OAC1BD,EAAe,SAAW,GAC1BK,GACH,CACT,CAAK,EAED,SAASA,GAAe,CACpB,MAAMC,EAAa,SAAS,cAAc,cAAc,EAAE,sBAAuB,EAAC,OAClF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,CACJ,CACL,CAAC"}